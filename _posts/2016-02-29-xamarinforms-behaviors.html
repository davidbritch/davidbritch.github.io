---
title: 'Xamarin.Forms Behaviors: EventHandlerBehavior and InvokeCommandAction'
date: '2016-02-29T12:13:00.001Z'
author: David Britch
tags:
- behaviour
- C#
- Xamarin
modified_time: '2016-02-29T12:13:22.580Z'
blogger_id: tag:blogger.com,1999:blog-8265682915956744370.post-1574937439378380477
blogger_orig_url: https://dbritch.blogspot.com/2016/02/xamarinforms-behaviors.html
---

<p><a href="http://www.davidbritch.com/2016/02/behaviours-library-for-xamarinforms_24.html">Previously</a>, I introduced my Behaviors Library for Xamarin.Forms, which can be downloaded from <a href="https://github.com/davidbritch/behaviors">GitHub</a> and <a href="https://www.nuget.org/packages/Behaviors.Forms/">NuGet</a>. Behaviors let you add functionality to controls without having to subclass them. Instead, the functionality is implemented in a behavior class and attached to the control as if it was part of the control itself. Behaviors enable you to implement code that you would normally have to write as code-behind, because it directly interacts with the API of the control in such a way that it can be concisely attached to the control and packaged for reuse across more than one app.</p> <p>In the context of <em>commanding</em>, behaviors are a useful approach for connecting a control to a command. In addition, they can be used to associate commands with controls that weren’t designed to interacts with commands. For example, they can be used to invoke a command in response to an event firing. Therefore, behaviors address many of the same scenarios as command-enabled controls, while providing a greater degree of flexibility.</p> <p>The <a href="http://www.davidbritch.com/2016/02/behaviours-library-for-xamarinforms_24.html">Behaviors Library for Xamarin.Forms</a> has the notion of behaviors and actions. A behavior is attached to a control and listens for something to happen, such as an event firing. When the “something” happens, it triggers one or more actions, such as invoking a command. Actions are invoked by behaviors and executed on a selected control.</p> <p>In this blog post, I’ll demonstrate using the <strong>EventHandlerBehavior</strong> and <strong>InvokeCommandAction</strong> classes to invoke one or more commands when an event fires.</p> <h3>Invoking a Command when an Event Fires</h3> <p>The <strong>EventHandlerBehavior</strong> class listens for a specified event to occur, and executes one or more actions in response. It requires you to set an<strong> EventName</strong> property to the event that you want the behavior to listen to, and an <strong>Actions</strong> property to one or more actions that should be executed in response to the event firing.</p> <p>The <strong>InvokeCommandAction</strong> class executes a specified <strong>ICommand</strong> when invoked. It requires you to set a <strong>Command</strong> property to an <strong>ICommand</strong> instance, and <strong>CommandParameter</strong> and <strong>Converter</strong> properties can be optionally set. The <strong>CommandParameter</strong> property should be set to an <strong>object</strong> instance, with the <strong>Converter</strong> property being set to an instance of a class that implements <strong>IValueConverter</strong>. The <strong>ICommand</strong> specified in the <strong>Command</strong> property will then be executed, with the <strong>CommandParameter</strong> and <strong>Converter</strong> values being used if specified.</p> <p>The following code shows an example of using the <strong>EventHandlerBehavior</strong> to invoke two commands:</p> <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:eb070acd-b72e-4a1a-a506-b965f9540191" class="wlWriterSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre style="overflow: hidden; height: 176px; width: 826px; background-color: white"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #0000ff">&lt;</span><span style="color: #800000">ListView </span><span style="color: #ff0000">ItemsSource</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding People}</span><span style="color: #0000ff">"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">ListView.Behaviors</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
        </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:EventHandlerBehavior </span><span style="color: #ff0000">EventName</span><span style="color: #0000ff">="ItemSelected"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:InvokeCommandAction </span><span style="color: #ff0000">Command</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding ItemSelectedCommand}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                           Converter</span><span style="color: #0000ff">="</span><span style="color: #808000">{StaticResource SelectedItemConverter}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:InvokeCommandAction </span><span style="color: #ff0000">Command</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding OutputAgeCommand}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                           Converter</span><span style="color: #0000ff">="</span><span style="color: #808000">{StaticResource SelectedItemConverter}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
        </span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">behaviors:EventHandlerBehavior</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">ListView.Behaviors</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">ListView</span><span style="color: #0000ff">&gt;</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>When the <strong>ListView.ItemSelected</strong> event fires, the <strong>ItemSelectedCommand</strong> and<strong> OutputAgeCommand</strong> are sequentially executed. The <strong>InvokeCommandAction</strong> class expects to find the <strong>ICommand</strong> instances on the <strong>BindingContext</strong> of the attached object, (and the <strong>BindingContext</strong> may have been set by a parent element). The <strong>Converter</strong> property of each<strong> InvokeCommandAction</strong> instance is set to the <strong>SelectedItemConverter</strong> instance, which returns the <strong>SelectedItem</strong> of the <strong>ListView</strong> from the <strong>SelectedItemChangedEventArgs</strong>. Note that the <strong>Actions</strong> property of the <strong>EventHandlerBehavior</strong> is set indirectly by creating the <strong>InvokeCommandAction</strong> instances as children of the <strong>EventHandlerBehavior</strong> instance.</p>
<p>The advantage of using the <strong>EventHandlerBehavior</strong> and <strong>InvokeCommandAction</strong> classes is that that commands can be associated with controls that weren’t designed to interact with commands, removing boiler-plate event handling code from code-behind files.</p>
<p>The sample application that this code comes from can be downloaded from <a href="https://github.com/davidbritch/behaviors">GitHub</a>.</p>
<h3>Summary</h3>
<p>The <strong>EventHandlerBehavior</strong> class listens for a specified event to occur, and executes one or more actions in response. The <strong>InvokeCommandAction</strong> class executes a specified <strong>ICommand</strong> when invoked. By using these two classes, commands can be associated with controls that weren’t designed to interact with commands, removing boiler-plate event handling code from code-behind files.</p>