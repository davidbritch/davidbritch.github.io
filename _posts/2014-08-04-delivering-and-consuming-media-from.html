---
layout: post
title: Delivering and consuming media from Azure Media Services
date: '2014-08-04T13:06:00.001+01:00'
author: David Britch
tags:
- Azure Media Services
modified_time: '2014-08-04T13:06:26.834+01:00'
thumbnail: http://lh3.ggpht.com/-McRitjMJdV4/U993QIH7rHI/AAAAAAAACps/CM6fOU3Gc04/s72-c/IC721580%25255B5%25255D.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-8265682915956744370.post-7597136041025354262
blogger_orig_url: https://dbritch.blogspot.com/2014/08/delivering-and-consuming-media-from.html
---

<p><a href="http://www.davidbritch.com/2014/07/encoding-and-processing-media-in-azure.html">Previously</a> I’ve summarised how to use the Azure Media Encoder to encode uploaded media for delivery to client apps. To do this you create a media processing job that enables you to schedule and automate the encoding of assets.</p> <p>In this blog post I’ll summarise how Azure Media Services content can be downloaded, or directly accessed by using locator URLs. For more information about locator URLs see my <a href="http://www.davidbritch.com/2014/07/encoding-and-processing-media-in-azure.html">previous blog post</a>. Content to be delivered can include media assets that are stored in Media Services, or media assets that have been encoded and processed in different ways.</p> <h3>Delivering media</h3> <p>There are a number of approaches that can be used to deliver Media Services content:</p> <ul> <li>Direct download from Azure Storage</li> <li>Access media in Azure Storage</li> <li>Stream media to a client application</li> <li>Send media content to another application or to another content provider.</li></ul> <p>Media content can be directly downloaded as long as you have the Media Services credentials for the account that uploaded and encoded the asset. Content can be downloaded by creating a shared access signature (SAS) locator, which contains a URL to the asset that contains the requested file. The URL can then be used by anyone to download the asset.</p> <p>Alternatively, you may want to give users access to content stored in Azure Storage. To do this you must create a full SAS URL to each file contained in the media asset. This is achieved by appending the file name to the SAS locator.</p> <p>Media Services also provides the means to directly access streaming media content. This is accomplished by creating an on-demand origin locator, which allows direct access to streaming content. With on-demand origin locators, you build a full URL to a streaming manifest file in an asset. You then provide the URL to a client application that can play streaming content.</p> <p>Content can also be delivered by using a Content Delivery Network (CDN), in order to offer improved performance and scalability when streaming media. For more information see <a href="http://azure.microsoft.com/en-us/documentation/articles/media-services-manage-origins/">How to Manage Origins in a Media Services Account</a>.</p> <p>When streaming media using on-demand origin locators you can take advantage of <em>dynamic packaging</em>. When using dynamic packaging, your video is stored in one encoded format, usually an adaptive bitrate MP4 file set. When a video player requests the video it specifies the format it requires, and the Media Services Origin Service converts the MP4 file to the format requested by the player. This allows you to store only one format of your videos, therefore reducing storage costs. For more information about the Origin Service see <a href="http://msdn.microsoft.com/en-us/library/dn735905.aspx#sec2">Azure Media Services Origin Service</a>.</p> <p>The following diagram shows a high-level overview of the media delivery process that we used in the <a href="http://msdn.microsoft.com/en-us/library/dn735912.aspx">Building an On-Demand Video Service with Microsoft Azure Media Services</a> project.</p> <p><img title="IC721580" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="IC721580" src="http://lh3.ggpht.com/-McRitjMJdV4/U993QIH7rHI/AAAAAAAACps/CM6fOU3Gc04/IC721580%25255B5%25255D.jpg?imgmax=800" width="798" height="412"></p> <p>Client apps request media through a REST web interface. The Contoso web service queries the Content Management System, which returns the URL of the media asset in Azure Storage. The media asset could be a single media file, or a manifest file which references multiple media files. The client application then requests the URL content from the Origin Service, which processes the outbound stream from storage to client application. For a code walkthrough of this process see <a href="http://msdn.microsoft.com/en-us/library/dn735905.aspx#sec11">Browsing videos</a>, <a href="http://msdn.microsoft.com/en-us/library/dn735905.aspx#sec12">Playing videos</a>, and <a href="http://msdn.microsoft.com/en-us/library/dn735905.aspx#sec13">Retrieving recommendations</a>.</p> <p>You can scale Media Services delivery by specifying the number of on-demand streaming reserved units that you would like your account to be provisioned with. For more information see <a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj872753.aspx#SpecifyNumOfRU">Scale a Media Service</a>.</p> <h3>Summary</h3> <p>This blog post has summarised how Azure Media Services content can be downloaded, or directly accessed by using locator URLs. Content to be delivered can include media assets that are stored in Media Services, or media assets that have been encoded and processed in different ways.</p>  