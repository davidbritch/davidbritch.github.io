---
title: Creating a custom GridView control that responds to layout changes
date: '2014-03-03T10:26:00.001Z'
author: David Britch
tags:
- C#
- Prism for the Windows Runtime
- Windows 8
- WinRT
- Windows Store app
modified_time: '2014-03-03T10:26:35.190Z'
blogger_id: tag:blogger.com,1999:blog-8265682915956744370.post-7075813471476870018
blogger_orig_url: https://dbritch.blogspot.com/2014/03/creating-custom-gridview-control-that.html
---

<p>In Windows Store apps for Windows 8.1 one of the UX guidelines is to scroll vertically when in <em>PortraitLayout</em> or <em>MinimalLayout</em>, and to scroll horizontally when in <em>DefaultLayout</em> (landscape). The conventional approach to implementing this is to provide two separate controls to handle the scenario – a <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.gridview.aspx">GridView</a> to handle horizontal scrolling views, and a <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listview.aspx">ListView</a> to handle vertical scrolling views. However, its possible to run into difficulties with this approach quite easily as it can be difficult to synchronize the two controls. For instance, if you have scrolled to a certain position in a <strong>GridView</strong> in <em>DefaultLayout</em> and then switch to the <strong>ListView</strong> in <em>MinimalLayout</em>, it can be difficult to make the <strong>ListView</strong> scroll to the same position. Similarly, if you’ve selected an item in a <strong>GridView</strong> in <em>DefaultLayout</em> and then switch to the <strong>ListView</strong> in <em>MinimalLayout</em>, it can be difficult in certain scenarios to automatically select the same item in the <strong>ListView</strong>.</p> <p>This is a topic that we gave much consideration while working on <a href="http://msdn.microsoft.com/en-us/library/windows/apps/xx130643.aspx">Prism for the Windows Runtime for Windows 8.1</a>, and the solution we came up with is the <strong>AutoRotatingGridView</strong> custom control. This control is a view state detecting <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.gridview.aspx">GridView</a> control created for the AdventureWorks Shopper reference implementation, which ships as part of Prism for the Windows Runtime. When, for example, the view state changes from <em>DefaultLayout</em> to <em>PortraitLayout</em> the items displayed by the control will be automatically rearranged to use an appropriate layout for the view state. The advantage of this approach is that only one control is required to handle all the view states, rather than having to define multiple controls to handle the different view states.</p> <p>The control listens to the <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.sizechanged.aspx">SizeChanged</a> event and updates its layout between <em>DefaultLayout</em>, <em>PortraitLayout</em>, and <em>MinimalLayout</em> based on the window size and shape. In order to take advantage of the functionality provided by the control you must specify additional properties on your <strong>AutoRotatingGridView</strong> instance. The control allows you to set the <strong>ItemTemplate</strong>, <strong>ItemsPanel</strong>, and <strong>GroupStyle</strong> properties, which are used for defining how the control responds in <em>DefaultLayout</em>. The control also defines the <strong>PortraitItemTemplate</strong>, <strong>PortraitItemsPanel</strong>, and <strong>PortraitGroupStyle</strong> properties, which are used for defining how the control responds in <em>PortraitLayout</em>. In addition, the control defines the <strong>MinimalItemTemplate</strong>, <strong>MinimalItemsPanel</strong>, and <strong>MinimalGroupStyle</strong> properties, which are used for defining how the control responds in <em>MinimalLayout</em>. Finally, the control defines the <strong>MinimalLayoutWidth</strong> property which has a default value of 500. All of these additional properties are defined in the <strong>AutoRotatingGridView</strong> class.</p> <p>In this blog post I’ll extended my sample PhotoViewer app to use the <strong>AutoRotatingGridView</strong> custom control to handle view states changes, and to ensure that content scrolls in the correct direction when in a specific layout.</p> <p><strong>Implementation</strong></p> <p>Using the <strong>AutoRotatingGridView</strong> custom control in the <strong>MainPage</strong> is simply a case of replacing the <strong>GridView</strong> control with the <strong>AutoRotatingGridView</strong> custom control.</p> <div id="codeSnippetWrapper" style="overflow: auto; cursor: text; font-size: 8pt; border-top: silver 1px solid; font-family: 'Courier New', courier, monospace; border-right: silver 1px solid; border-bottom: silver 1px solid; padding-bottom: 4px; direction: ltr; text-align: left; padding-top: 4px; padding-left: 4px; margin: 20px 0px 10px; border-left: silver 1px solid; line-height: 12pt; padding-right: 4px; max-height: 200px; width: 97.5%; background-color: #f4f4f4"> <div id="codeSnippet" style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4"><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white"><span style="color: #0000ff">&lt;</span><span style="color: #800000">controls:AutoRotatingGridView</span> <span style="color: #ff0000">x:Name</span><span style="color: #0000ff">="photosGridView"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">                               <span style="color: #ff0000">Grid</span>.<span style="color: #ff0000">Row</span><span style="color: #0000ff">="1"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">                               <span style="color: #ff0000">IsItemClickEnabled</span><span style="color: #0000ff">="True"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">                               <span style="color: #ff0000">ItemsSource</span><span style="color: #0000ff">="{Binding Photos}"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">                               <span style="color: #ff0000">Loaded</span><span style="color: #0000ff">="photosGridView_Loaded"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">                               <span style="color: #ff0000">Margin</span><span style="color: #0000ff">="140,0,0,0"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">                               <span style="color: #ff0000">ScrollViewer</span>.<span style="color: #ff0000">IsHorizontalScrollChainingEnabled</span><span style="color: #0000ff">="False"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">                               <span style="color: #ff0000">SelectionMode</span><span style="color: #0000ff">="None"</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">    <span style="color: #0000ff">&lt;</span><span style="color: #800000">interactivity:Interaction.Behaviors</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">        <span style="color: #0000ff">&lt;</span><span style="color: #800000">core:EventTriggerBehavior</span> <span style="color: #ff0000">EventName</span><span style="color: #0000ff">="ItemClick"</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">            <span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviours:NavigateWithEventArgsToPageAction</span> <span style="color: #ff0000">TargetPage</span><span style="color: #0000ff">="PhotoViewer.Views.PhotoPage"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">                                                          <span style="color: #ff0000">EventArgsParameterPath</span><span style="color: #0000ff">="ClickedItem.Path"</span> <span style="color: #0000ff">/&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">core:EventTriggerBehavior</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">interactivity:Interaction.Behaviors</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">    <span style="color: #0000ff">&lt;</span><span style="color: #800000">controls:AutoRotatingGridView.ItemTemplate</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">        <span style="color: #0000ff">&lt;</span><span style="color: #800000">DataTemplate</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">            <span style="color: #0000ff">&lt;</span><span style="color: #800000">Border</span> <span style="color: #ff0000">Background</span><span style="color: #0000ff">="#FF939598"</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">                <span style="color: #0000ff">&lt;</span><span style="color: #800000">Image</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="130"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">                       <span style="color: #ff0000">Source</span><span style="color: #0000ff">="{Binding Path=Thumbnail, Converter={StaticResource ThumbnailConverter}}"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">                       <span style="color: #ff0000">Stretch</span><span style="color: #0000ff">="Uniform"</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">                       <span style="color: #ff0000">Width</span><span style="color: #0000ff">="190"</span> <span style="color: #0000ff">/&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">            <span style="color: #0000ff">&lt;/</span><span style="color: #800000">Border</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white">        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">DataTemplate</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: #f4f4f4">    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">controls:AutoRotatingGridView.ItemTemplate</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--><pre style="border-top-style: none; overflow: visible; font-size: 8pt; border-left-style: none; font-family: 'Courier New', courier, monospace; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; line-height: 12pt; padding-right: 0px; width: 100%; background-color: white"><span style="color: #0000ff">&lt;/</span><span style="color: #800000">controls:AutoRotatingGridView</span><span style="color: #0000ff">&gt;</span></pre><!--CRLF--></div></div><p>This XAML defines an <strong>AutoRotatingGridView</strong> custom control with an <strong>ItemTemplate</strong> for <em>DefaultLayout</em>. Because no values are specified for <em>PortraitLayout</em> or <em>MinimalLayout</em>, the control falls back to using the <strong>ItemTemplate</strong> specified for <em>DefaultLayout</em>. This is adequate for the sample app because the <strong>DataTemplate</strong> is sufficiently simple that it can be displayed in <em>DefaultLayout</em>, <em>PortraitLayout</em>, and <em>MinimalLayout</em>, without modification. For information about the purpose of the <strong>NavigateWithEventArgsToPageAction</strong> custom interaction, see <a href="http://www.davidbritch.com/2013/11/writing-custom-blend-interaction-to.html">Writing a custom Blend interaction to perform page navigation in Windows Store apps</a>.</p><p>The result of using the <strong>AutoRotatingGridView</strong> custom control is that when in <em>DefaultLayout</em> scrolling is horizontal, and when in <em>PortraitLayout</em> or <em>MinimalLayout</em> scrolling is vertical. Contrast this to using the <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.gridview.aspx">GridView</a> control in which scrolling is horizontal in all layouts.</p><p>This scenario only demonstrates a very simple example of the <strong>AutoRotatingGridView</strong> custom control. It’s real power lies in displaying more complex data where it becomes necessary to define <strong>ItemTemplate</strong>s, <strong>ItemsPanel</strong>s, and <strong>GroupStyle</strong>s for each layout. For examples of these scenarios see the <a href="http://msdn.microsoft.com/en-us/library/windows/apps/xx130643.aspx">AdventureWorks Shopper reference implementation</a>.</p><h3>Summary</h3><p>In this blog post I’ve further extended the sample photo viewer app so that the <strong>MainPage</strong> uses the <strong>AutoRotatingGridView</strong> custom control to respond to view state changes. This simply involved replacing the <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.gridview.aspx">GridView</a> control in the <strong>MainPage</strong> with the <strong>AutoRotatingGridView</strong> custom control. Take a look at the <a href="http://msdn.microsoft.com/en-us/library/windows/apps/xx130643.aspx">AdventureWorks Shopper reference implementation</a> for more complex examples of the <strong>AutoRotatingGridView</strong> custom control.</p><p>The sample app can be downloaded <a href="http://1drv.ms/1mFMT1k">here</a>.</p>  