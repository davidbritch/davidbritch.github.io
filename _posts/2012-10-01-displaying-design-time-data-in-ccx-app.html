---
title: Displaying design-time data in a C++/CX app
date: '2012-10-01T12:08:00.001+01:00'
author: David Britch
tags:
- Blend
- C++/CX
- Windows 8
- WinRT
- Design-time data
- Windows Store app
modified_time: '2012-10-01T12:26:50.876+01:00'
thumbnail: http://lh6.ggpht.com/-5qFOtWUdI-k/UGl5tIpog1I/AAAAAAAACc4/IsDRylmGFKw/s72-c/blend_thumb.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-8265682915956744370.post-8348531379589462916
blogger_orig_url: https://dbritch.blogspot.com/2012/10/displaying-design-time-data-in-ccx-app.html
---

<p><a href="http://www.davidbritch.com/2012/09/detecting-design-mode-in-blend.html">Previously</a> I’ve written about detecting design mode in Blend, specifically in a WinJS app. This is sometimes necessary if you want to enable the designer-developer workflow. The designer-developer workflow means that during the app development process, designers and developers can work independently and concurrently on their components. The designers can concentrate on the UI in Blend, displaying sample data to view layout sizes accurately and see realistic results for sizing and styling, while the developers can work on the code in Visual Studio.</p> <p>In most circumstances for HTML5 apps, Blend can automatically get data from the file system without any additional effort from the developer, although it’s occasionally necessary to <a href="http://www.davidbritch.com/2012/09/detecting-design-mode-in-blend.html">add logic to check for design mode</a>. However, more work is required to display data from the file system at design-time in a C++/CX app.</p> <p>In a <a href="http://www.davidbritch.com/2012/09/the-repository-pattern-in-ccx.html">previous blog post</a>, I extended a sample photo viewing app to use the Repository pattern so that access to the underlying data source, in this case the file system, is through a centralized data access layer. In this blog post I will add design-time data to the app, in order to enable the designer-developer workflow.</p> <p>The sample application can be downloaded <a href="https://skydrive.live.com/redir?resid=1B98B9A3CC9EB1AA!166&amp;authkey=!AFJAuZgdRurLhoo">here</a>.</p> <h3>Implementation</h3> <p>To display data in the designer, you must declare it in XAML instead of just setting the <a href="http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.frameworkelement.datacontext.aspx">DataContext</a> property programmatically in code-behind. This is necessary because when you open a page or user control in the designer, it is not instantiated. The designer parses the XAML, but does not run its code-behind. However, the designer will instantiate any child user controls that it encounters when it parses the XAML content.</p> <p>The technique adopted here for displaying design-time data is to use design-time attributes in page’s XAML. To do this, you must ensure that the designer namespace is declared in your XAML file.</p> <div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper"><div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">xmlns:d=<span style="color: #006080">"http://schemas.microsoft.com/expression/blend/2008"</span></pre></div></div>With this declaration, attributes with <strong>d:</strong> prefixes are interpreted only at design-time and are ignored at run time. Then, a <strong>DesignTimeData</strong> class is specified. Note that the class must have the <a href="http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.data.bindableattribute">Windows::UI::Xaml::Data::Bindable</a> attribute set on it. <br /><div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper"><div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">namespace</span> PhotoViewer</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">{</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    [Windows::UI::Xaml::Data::Bindable]</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">public</span> ref <span style="color: #0000ff">class</span> DesignTimeData sealed</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    {</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">public</span>:</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">        property Windows::UI::Xaml::Media::ImageSource^ Photo</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">        {</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">            Windows::UI::Xaml::Media::ImageSource^ get();</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">        }</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    };</pre><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">}</pre><!--CRLF--></div></div>This class only contains one property, <strong>Photo</strong>, which will return an <a href="http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.media.imagesource">ImageSource</a> object to the designer. The implementation file for this class is shown below. It simply returns a PNG file as a <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.bitmapimage">BitmapImage</a>. <br /><div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper"><div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">ImageSource^ DesignTimeData::Photo::get()</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">{</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">return</span> ref <span style="color: #0000ff">new</span> BitmapImage(ref <span style="color: #0000ff">new</span> Uri(<span style="color: #006080">"ms-appx:///Assets/Logo.png"</span>));</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">}</pre><!--CRLF--></div></div>On the root <a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.grid">Grid</a> of the page you want to display design-time data on, in this case the <strong>PhotoView</strong> page, you then specify the design-time <a href="http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.frameworkelement.datacontext.aspx">DataContext</a> for the page. <br /><div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper"><div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">&lt;Grid x:Name=<span style="color: #006080">"ContentRoot"</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">      d:DataContext=<span style="color: #006080">"{Binding Source={d:DesignInstance Type=local:DesignTimeData, IsDesignTimeCreatable=True}}"</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">      Background=<span style="color: #006080">"{StaticResource ApplicationPageBackgroundThemeBrush}"</span></pre><!--CRLF--></div></div>The <strong>d:DesignInstance</strong> markup extension indicates that the design-time source is a designer-created instanced based on the <strong>DesignTimeData</strong> type. The <strong>IsDesignTimeCreatable</strong> setting indicates that the designer will instantiate that type directly, which is necessary to display the design-time data. If you don’t set this attribute (or you set it to <strong>False</strong>), the designer instead generates and instantiates a lightweight class with the same bindable properties. This is only useful if you just want the properties to appear as potential binding targets in the data binding designer, but you don’t care about displaying sample data. The <a href="http://msdn.microsoft.com/library/windows/apps/BR242752">Image</a> control on the <strong>PhotoView</strong> page binds to the <strong>Photo</strong> property to display an image. At design-time the <strong>Photo</strong> property from the <strong>DesignTimeData</strong> class is bound to, while at run-time the <strong>Photo</strong> property from the <strong>PhotoViewModel</strong> class is bound to. <br /><div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper"><div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">&lt;Image HorizontalAlignment=<span style="color: #006080">"Center"</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">       Source=<span style="color: #006080">"{Binding Photo}"</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">       VerticalAlignment=<span style="color: #006080">"Center"</span> /&gt;</pre><!--CRLF--></div></div>In order to build the app, you need to include the header file for the <strong>DesignTimeData</strong> class, DesignTimeData.h, in the App.xaml.h header file, either indirectly or directly. This ensures that the types necessary to work with XAML are generated at compile time. Then, when viewed in both the Visual Studio Designer or the Blend designer you will see an image on the <strong>PhotoView</strong> page, enabling designers to proceed with any layout/styling changes required. <br /><br /><a href="http://lh4.ggpht.com/-xK_Z_qpDLL0/UGl5seyR33I/AAAAAAAACcw/C600ycPlNuQ/s1600-h/blend2.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="blend" border="0" alt="blend" src="http://lh6.ggpht.com/-5qFOtWUdI-k/UGl5tIpog1I/AAAAAAAACc4/IsDRylmGFKw/blend_thumb.png?imgmax=800" width="244" height="151"></a> <br /><br />The image shown in the screenshot above is simply the default logo (Logo.png) for a Windows store app project. <br /><br />For a more complicated implementation of design-time data, which includes grouped data, see the <a href="http://hilo.codeplex.com/">Hilo</a> project. <br /><br /><h3>Summary</h3><br />Design-time data can be added to Windows Store apps written in C++/CX, in order to enable the designer-developer workflow. The designer-developer workflow means that during the app development process, designers and developers can work independently and concurrently on their components. The designers can concentrate on the UI in Blend, displaying sample data to view layout sizes accurately and see realistic results for sizing and styling, while the developers can work on the code in Visual Studio. <br />  