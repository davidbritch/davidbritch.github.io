---
title: Uploading content into Azure Media Services
date: '2014-06-23T13:19:00.001+01:00'
author: David Britch
tags:
- Azure Media Services
modified_time: '2014-06-23T13:20:07.709+01:00'
thumbnail: http://lh3.ggpht.com/-I5rQQnutENc/U6gbbYAl4MI/AAAAAAAACok/vfLq_p0_1O0/s72-c/IC721592_thumb%25255B2%25255D.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-8265682915956744370.post-620592094029111340
blogger_orig_url: https://dbritch.blogspot.com/2014/06/uploading-content-into-azure-media.html
---

<p><a href="http://www.davidbritch.com/2014/06/developing-content-management-system.html">Previously</a> I’ve introduced the Content Management System (CMS) that’s used to store video details for the video on-demand service, along with details of video encoding jobs. I’ve also explained how to <a href="http://www.davidbritch.com/2014/06/connecting-to-azure-media-services.html">connect to Azure Media Services</a>.</p> <p>In this blog post I’ll summarise how client apps can upload video to the video on-demand service. For info about the supported codecs and file container formats see <a href="http://msdn.microsoft.com/en-us/library/dn535852.aspx">Formats Supported by the Media Services Encoder</a>.</p> <h3>Uploading content</h3> <p>To upload content into Media Services you must first create an asset and add files to it, and then upload the asset. This process is known as <em>ingesting content</em>. The content object in Media Services is an <a href="http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.mediaservices.client.iasset.aspx">IAsset</a>, which is a collection of metadata about a set of media files. Each <strong>IAsset</strong> contains one or more <a href="http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.mediaservices.client.iassetfile.aspx">IAssetFile</a> objects. The approach adopted here is to create an <a href="http://msdn.microsoft.com/en-us/library/hh974277.aspx">Asset</a>, upload the content to Media Services, and then generate <a href="http://msdn.microsoft.com/en-us/library/hh974275.aspx">AssetFiles</a> and associate them with the <strong>Asset</strong>. In order to create an <strong>Asset</strong> you must first have a reference to the Media Services server context. For more info see <a href="http://www.davidbritch.com/2014/06/connecting-to-azure-media-services.html">Connecting to Azure Media Services</a>.</p> <p>The following diagram shows a high-level overview of the media upload process used in the <a href="http://msdn.microsoft.com/en-us/library/dn735912.aspx">Building an On-Demand Video Service with Microsoft Azure Media Services</a> project.</p> <p><img title="IC721592" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="IC721592" src="http://lh3.ggpht.com/-I5rQQnutENc/U6gbbYAl4MI/AAAAAAAACok/vfLq_p0_1O0/IC721592_thumb%25255B2%25255D.jpg?imgmax=800" width="795" height="408"></p> <p>The client apps communicate with the web service through a REST web interface. When a new video is uploaded a new asset is created by Media Services, and the asset is uploaded to Azure Storage before the asset details are published to the CMS. The upload process can be decomposed into the following steps:</p> <ol> <li>Create a new empty <a href="http://msdn.microsoft.com/en-us/library/hh974277.aspx">Asset</a>.  <li>Create an <a href="http://msdn.microsoft.com/en-us/library/hh974297.aspx">AccessPolicy</a> instance that defines the permissions and duration of access to the <strong>Asset</strong>.  <li>Create a <a href="http://msdn.microsoft.com/en-us/library/hh974308.aspx">Locator</a> instance that will provide access to the <strong>Asset</strong>.  <li>Upload the file that’s associated with the <strong>Asset</strong> into blob storage.  <li>Publish the <strong>Asset</strong>.  <ul> <li>Save the <strong>Asset</strong> details to the CMS.  <li>Generate an <a href="http://msdn.microsoft.com/en-us/library/hh974275.aspx">AssetFile</a> for the <strong>Asset</strong>.  <li>Add the <strong>Asset</strong> to the encoding pipeline.</li></ul></li></ol> <p>For a code walkthrough of this process see <a href="http://msdn.microsoft.com/en-us/library/dn735908.aspx#sec9">Upload process in the Contoso Azure Media Services applications</a>.</p> <p>Media Services also allows you to secure your content from the time it leaves your computer, by specifying an encryption option as a parameter when creating an <strong>Asset</strong>. For more info see <a href="http://msdn.microsoft.com/en-us/library/dn735908.aspx#sec7">Securing media for upload into Azure Media Services</a>. </p> <h3>Summary</h3> <p>This blog post has summarised the media upload process from client apps into a video on-demand service that uses Azure Media Services. For more info see <a href="http://msdn.microsoft.com/en-us/library/dn735912.aspx">Building an On-Demand Video Service with Microsoft Azure Media Services</a>.</p> <p>In my next blog post I’ll discuss the next step in the Media Services workflow – encoding and processing uploaded media.</p>  