---
layout: post
title: 'Xamarin.Forms Behaviors: RotateAction'
date: '2016-07-01T09:45:00.001+01:00'
author: David Britch
tags:
- behaviour
- C#
- Xamarin
modified_time: '2016-07-01T09:45:54.224+01:00'
blogger_id: tag:blogger.com,1999:blog-8265682915956744370.post-7622672473763472281
blogger_orig_url: https://dbritch.blogspot.com/2016/07/xamarinforms-behaviors-rotateaction.html
---

<p><a href="http://www.davidbritch.com/2016/06/xamarinforms-behaviors-scaleaction.html">Previously</a>, I demonstrated using the <strong>EventHandlerBehavior</strong> and <strong>ScaleAction</strong> classes to run a scaling animation when an event occurs. The <a href="http://www.davidbritch.com/2016/02/behaviours-library-for-xamarinforms_24.html">Behaviors Library for Xamarin.Forms</a> has the notion of behaviors and actions. A behavior is attached to a control and listens for something to happen, such as an event firing. When the “something” happens, it triggers one or more actions, such as invoking a method or command. Actions are invoked by behaviors and executed on a selected control.</p> <p>In this blog post, I’ll demonstrate using the <strong>EventHandlerBehavior</strong> and <strong>RotateAction</strong> classes to run a rotation animation when an event occurs.</p> <h3>Rotating a VisualElement when an Event Fires</h3> <p>The <strong>EventHandlerBehavior</strong> class listens for a specified event to occur, and executes one or more actions in response. It requires you to set an <strong>EventName</strong> property to the event that you want the behavior to listen to, and an <strong>Actions</strong> property to one or more actions that should be executed in response to the event firing. Note that the <strong>Actions</strong> property of the <strong>EventHandlerBehavior</strong> instance is set indirectly by creating the <strong>RotateAction</strong> instance as a child of the <strong>EventHandlerBehavior</strong> instance.</p> <p>The <strong>RotateAction</strong> class performs a rotation animation, and allows the following <em>optional</em> properties to be set:</p> <ul> <li><strong>TargetObject</strong> – an <strong>object</strong> that is the <strong>VisualElement</strong> on which to run the animation. If this value is omitted the object the behavior is attached to will be set as the target on which to run the animation.  <li><strong>FinalAngle</strong> – a <strong>double</strong> that specifies the angle of the <strong>Rotation</strong> property to animate to. If this value is omitted the default value of 0.0 is used.  <li><strong>Axis</strong> – a <strong>RotationAxis</strong> that specifies whether to rotate on the X, Y, or Z axis. If this value is omitted the default value of Z is used.  <li><strong>Duration</strong> – an <strong>int</strong> that represents the length of the animation in milliseconds. If this value is omitted the default value of 250ms is used.  <li><strong>EasingFunction </strong>– an <strong>EasingFunction </strong>that specifies any velocity changes in the animation. If this value is omitted the default value of the <strong>Linear</strong> easing function is used.  <li><strong>IsRelative</strong> – a <strong>boolean</strong> that specifies whether to perform relative scaling. If this value is omitted the default value of <strong>false</strong> will be used. Relative rotation obtains the current <strong>Rotation</strong> property value for the start of the animation, and then rotates from that value to the value plus the value defined by the <strong>FinalAngle</strong> property.  <li><strong>Await </strong>– a <strong>boolean</strong> that represents whether the animation should be awaited, or whether it should be allowed to complete in the background. If this value is omitted the default value of <strong>false</strong> will be used.</li></ul> <p>The following code example demonstrates using the <strong>EventHandlerBehavior</strong> and <strong>RotateAction</strong> classes to implement a compound animation that concurrently rotates an <strong>Image</strong> control on the X, Y, and Z axes:</p> <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:77096e91-180d-423c-aa18-371e5ada7605" class="wlWriterSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre style="overflow: hidden; height: 358px; width: 826px; background-color: white"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #0000ff">&lt;</span><span style="color: #800000">Image </span><span style="color: #ff0000">x:Name</span><span style="color: #0000ff">="image"</span><span style="color: #ff0000"> Source</span><span style="color: #0000ff">="monkey.png"</span><span style="color: #ff0000"> Opacity</span><span style="color: #0000ff">="0"</span><span style="color: #ff0000"> VerticalOptions</span><span style="color: #0000ff">="CenterAndExpand"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;</span><span style="color: #800000">Button </span><span style="color: #ff0000">Text</span><span style="color: #0000ff">="Run Animation"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">Button.Behaviors</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
        </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:EventHandlerBehavior </span><span style="color: #ff0000">EventName</span><span style="color: #0000ff">="Clicked"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
            </span><span style="color: #008000">&lt;!--</span><span style="color: #008000"> Compound Animation </span><span style="color: #008000">--&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:RotateAction </span><span style="color: #ff0000">TargetObject</span><span style="color: #0000ff">="</span><span style="color: #808000">{x:Reference image}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                    Duration</span><span style="color: #0000ff">="600000"</span><span style="color: #ff0000"> 
                                    FinalAngle</span><span style="color: #0000ff">="110520"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:RotateAction </span><span style="color: #ff0000">TargetObject</span><span style="color: #0000ff">="</span><span style="color: #808000">{x:Reference image}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                    Duration</span><span style="color: #0000ff">="600000"</span><span style="color: #ff0000"> 
                                    FinalAngle</span><span style="color: #0000ff">="90360"</span><span style="color: #ff0000"> 
                                    Axis</span><span style="color: #0000ff">="X"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:RotateAction </span><span style="color: #ff0000">TargetObject</span><span style="color: #0000ff">="</span><span style="color: #808000">{x:Reference image}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                    Duration</span><span style="color: #0000ff">="600000"</span><span style="color: #ff0000"> 
                                    FinalAngle</span><span style="color: #0000ff">="71640"</span><span style="color: #ff0000"> 
                                    Axis</span><span style="color: #0000ff">="Y"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
        </span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">behaviors:EventHandlerBehavior</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">Button.Behaviors</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">Button</span><span style="color: #0000ff">&gt;</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>When the <strong>Button.Clicked</strong> event fires, three <strong>RotateAction</strong> instances are concurrently executed over 10 minutes (600000 milliseconds). Each <strong>RotateAction</strong> instance makes a different number of 360 degree rotations – 307 rotations on the <strong>Z</strong> axis (110520/360 = 307), 251 rotations on the <strong>X</strong> axis (90360/360 = 251), and 199 rotations on the <strong>Y</strong> axis (71640/360 = 199). These values are prime numbers, therefore ensuring that the rotations aren’t synchronized and hence won’t result in repetitive patterns.</p>
<p>The advantage of using the <strong>RotateAction</strong> is that it’s possible to invoke animations through XAML, rather than having to use C#. In addition, when combined with behaviors, a scaling animation can easily be invoked from XAML when a behavior occurs, such as an event firing, or when a piece of data changes.</p>
<p>The sample application that this code comes from can be downloaded from <a href="https://github.com/davidbritch/behaviors">GitHub</a>.</p>
<h3>Summary</h3>
<p>The <strong>RotateAction</strong> class allows rotation animations to be invoked through XAML when a behaviors occurs, such as an event firing, or when a piece of data changes.</p>