---
layout: post
title: 'Xamarin.Forms Behaviors: DataChangedBehavior and SetPropertyAction'
date: '2016-04-13T11:33:00.001+01:00'
author: David Britch
tags:
- behaviour
- C#
- Xamarin
modified_time: '2016-04-13T11:33:37.260+01:00'
blogger_id: tag:blogger.com,1999:blog-8265682915956744370.post-4890017611689961885
blogger_orig_url: https://dbritch.blogspot.com/2016/04/xamarinforms-behaviors_13.html
---

<p>Previously, I demonstrated using the <strong>DataChangedBehavior</strong> and <strong>InvokeMethodAction</strong> classes to invoke one or more methods when data changes. The <a href="http://www.davidbritch.com/2016/02/behaviours-library-for-xamarinforms_24.html">Behaviors Library for Xamarin.Forms</a> has the notion of behaviors and actions. A behavior is attached to a control and listens for something to happen, such as an event firing. When the “something” happens, it triggers one or more actions, such as invoking a method or command. Actions are invoked by behaviors and executed on a selected control.</p> <p>In this blog post, I’ll demonstrate using the <strong>DataChangedBehavior</strong> and <strong>SetPropertyAction</strong> classes to set one or more properties when data changes.</p> <h3>Setting a Property when Data Changes</h3> <p>The <strong>DataChangedBehavior</strong> class listens for the bound data to meet a specified condition, and executes one or more actions in response. It requires you to set the following properties:</p> <ul> <li><strong>Binding</strong> – an <strong>object</strong> that represents the bound object that the behavior will listen to.  <li><strong>ComparisonCondition</strong> – a <strong>ComparisonCondition</strong> enumeration value that represents the comparison to be performed between the values of the <strong>Binding</strong> and <strong>Value</strong> properties. The enumeration values are: <strong>Equal</strong>, <strong>NotEqual</strong>, <strong>LessThan</strong>, <strong>LessThanOrEqual</strong>, <strong>GreaterThan</strong>, <strong>GreaterThanOrEqual</strong>.  <li><strong>Value</strong> – an <strong>object</strong> that represents the value to be compared with the value of the <strong>Binding</strong> property.  <li><strong>Actions</strong> – one or more actions that should be executed in response to the bound data changing. Note that this property is set indirectly.</li></ul> <p>The <strong>SetPropertyAction</strong> class sets a specified property when invoked. It requires you to set a <strong>TargetObject</strong> property to an object that exposes the property of interest, a <strong>PropertyName</strong> property to the name of the property to be set, and a <strong>Value</strong> property to an object that represents the property value to be set.</p> <p>The following code example shows an example of using the <strong>DataChangedBehavior</strong> and <strong>SetPropertyAction</strong> classes to set the colour of <strong>BoxView</strong> control and a ViewModel property as a <strong>Slider</strong> value changes:</p> <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:b6565a81-8be2-42da-82ba-90c91bd206f3" class="wlWriterSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre style="overflow: hidden; height: 693px; width: 826px; background-color: white"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #0000ff">&lt;</span><span style="color: #800000">ContentPage.BindingContext</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">local:SetPropertyDemoPageViewModel </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">ContentPage.BindingContext</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    
</span><span style="color: #0000ff">&lt;</span><span style="color: #800000">Slider </span><span style="color: #ff0000">x:Name</span><span style="color: #0000ff">="slider"</span><span style="color: #ff0000"> Minimum</span><span style="color: #0000ff">="0"</span><span style="color: #ff0000"> Maximum</span><span style="color: #0000ff">="100"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">Slider.Behaviors</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
        </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:DataChangedBehavior </span><span style="color: #ff0000">Binding</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding Path=Value, Source={x:Reference slider}}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                       ComparisonCondition</span><span style="color: #0000ff">="LessThan"</span><span style="color: #ff0000"> 
                                       Value</span><span style="color: #0000ff">="1"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:SetPropertyAction </span><span style="color: #ff0000">TargetObject</span><span style="color: #0000ff">="</span><span style="color: #808000">{x:Reference changingBoxView}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                         PropertyName</span><span style="color: #0000ff">="Color"</span><span style="color: #ff0000"> 
                                         Value</span><span style="color: #0000ff">="</span><span style="color: #808000">{StaticResource ColorAqua}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:SetPropertyAction </span><span style="color: #ff0000">TargetObject</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                         PropertyName</span><span style="color: #0000ff">="ColourText"</span><span style="color: #ff0000"> 
                                         Value</span><span style="color: #0000ff">="Aqua"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
        </span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">behaviors:DataChangedBehavior</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
        </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:DataChangedBehavior </span><span style="color: #ff0000">Binding</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding Path=Value, Source={x:Reference slider}}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                       ComparisonCondition</span><span style="color: #0000ff">="GreaterThanOrEqual"</span><span style="color: #ff0000"> 
                                       Value</span><span style="color: #0000ff">="1"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:SetPropertyAction </span><span style="color: #ff0000">TargetObject</span><span style="color: #0000ff">="</span><span style="color: #808000">{x:Reference changingBoxView}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                         PropertyName</span><span style="color: #0000ff">="Color"</span><span style="color: #ff0000"> 
                                         Value</span><span style="color: #0000ff">="</span><span style="color: #808000">{StaticResource ColorRed}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
            </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">behaviors:SetPropertyAction </span><span style="color: #ff0000">TargetObject</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> 
                                         PropertyName</span><span style="color: #0000ff">="ColourText"</span><span style="color: #ff0000"> 
                                         Value</span><span style="color: #0000ff">="Red"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
        </span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">behaviors:DataChangedBehavior</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
        ...
    </span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">Slider.Behaviors</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">Slider</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;</span><span style="color: #800000">BoxView </span><span style="color: #ff0000">x:Name</span><span style="color: #0000ff">="changingBoxView"</span><span style="color: #ff0000"> WidthRequest</span><span style="color: #0000ff">="100"</span><span style="color: #ff0000"> Color</span><span style="color: #0000ff">="Aqua"</span><span style="color: #ff0000"> HeightRequest</span><span style="color: #0000ff">="100"</span><span style="color: #ff0000"> ... </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;</span><span style="color: #800000">StackLayout </span><span style="color: #ff0000">Orientation</span><span style="color: #0000ff">="Horizontal"</span><span style="color: #ff0000"> HorizontalOptions</span><span style="color: #0000ff">="Center"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">Label </span><span style="color: #ff0000">Text</span><span style="color: #0000ff">="Slider value:"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">Label </span><span style="color: #ff0000">BindingContext</span><span style="color: #0000ff">="</span><span style="color: #808000">{x:Reference slider}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> Text</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding Value, StringFormat='{0:F0}'}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">StackLayout</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;</span><span style="color: #800000">StackLayout </span><span style="color: #ff0000">Orientation</span><span style="color: #0000ff">="Horizontal"</span><span style="color: #ff0000"> HorizontalOptions</span><span style="color: #0000ff">="Center"</span><span style="color: #0000ff">&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">Label </span><span style="color: #ff0000">Text</span><span style="color: #0000ff">="Colour:"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
    </span><span style="color: #0000ff">&lt;</span><span style="color: #800000">Label </span><span style="color: #ff0000">Text</span><span style="color: #0000ff">="</span><span style="color: #808000">{Binding ColourText}</span><span style="color: #0000ff">"</span><span style="color: #ff0000"> </span><span style="color: #0000ff">/&gt;</span><span style="color: #000000">
</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">StackLayout</span><span style="color: #0000ff">&gt;</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>When the <strong>Value</strong> property of the <strong>Slider</strong> changes a series of <strong>DataChangedBehavior</strong> instances are executed. Each behavior instance compares the <strong>Value </strong>property of the <strong>Slider</strong> against a value, and executes two <strong>SetPropertyAction</strong> instances if the comparison is <strong>true</strong>. The first <strong>SetPropertyAction</strong> instance changes the <strong>Color</strong> property value of the <strong>BoxView</strong>, while the second <strong>SetPropertyAction</strong> instance sets the <strong>ColourText</strong> property of the <strong>SetPropertyDemoViewModel</strong> instance. Note that the <strong>Actions</strong> property of each <strong>DataChangedBehavior</strong> instance is set indirectly by creating the <strong>SetPropertyAction</strong> instances as children of the <strong>DataChangedBehavior</strong> instances.</p>
<p>The advantage of combining the <strong>DataChangedBehavior</strong> and <strong>SetPropertyAction</strong> classes is that properties of controls and ViewModels can easily be set when data changes, therefore removing boiler-plate property setting code from code-behind and ViewModels.</p>
<p>The sample application that this code comes from can be downloaded from <a href="https://github.com/davidbritch/behaviors">GitHub</a>.</p>
<h3>Summary</h3>
<p>The <strong>DataChangedBehavior</strong> class listens for the bound data to meet a specified condition, and executes one or more actions in response. The <strong>SetPropertyAction</strong> class sets a specified property when invoked. The advantage of combining the <strong>DataChangedBehavior</strong> and <strong>SetPropertyAction</strong> classes is that properties of controls and ViewModels can easily be set when data changes, therefore removing boiler-plate property setting code from code-behind and ViewModels.</p>